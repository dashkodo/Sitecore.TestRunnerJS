<?xml version="1.0" encoding="utf-8"?>
<configuration xmlns:patch="http://www.sitecore.net/xmlconfig/">
  <sitecore>
    <settings>
      <!--  BOOTSTRAP MODULE PATH
            The path to TestRunnerJS bootstrap module that is responsible for loading test environment before SPEAK application
      -->
      <setting name="TestRunnerJS.BootstrapModulePath" value="/sitecore/TestRunnerJS/assets/bootstrapper.js"/>

      <!--  REQUIREJS SETTING NAME
            The name of SPEAK setting that contains path to the requirejs loader entry point
      -->
      <setting name="TestRunnerJS.RequireJSSettingName" value="Speak.Html.RequireJSBackwardCompatibilityFile"/>

      <!--  ROOT TEST FIXTURE FOLDER
            The path to the folder that contains test fixtures to run
      -->
      <setting name="TestRunnerJS.RootTestFixturesFolder" value="/sitecore/TestRunnerJS/Tests"/>
    </settings>
    <pipelines>
      <initialize>
        <!--  REGISTER TEST RUNNER ROUTES
              The pipeline processor is responsible for registering WebAPi routes of TestRunnerJS services.
        -->
        <processor type="Sitecore.TestRunnerJS.Pipelines.Initialize.RegisterTestRunnerRoutes, Sitecore.TestRunnerJS" />
      </initialize>
      <httpRequestBegin>
        <!--  ENSURE TEST RUNNER ENABLED
              The pipeline processor is responsible for enabling testing environment by specifying sc_testrunnerjs query parameter.
        -->
        <processor type="Sitecore.TestRunnerJS.Pipelines.HttpRequest.EnsureTestRunnerEnabled, Sitecore.TestRunnerJS" 
                   patch:after="processor[@type='Sitecore.Pipelines.HttpRequest.QueryStringResolver, Sitecore.Kernel']" />
      </httpRequestBegin>
    </pipelines>
  </sitecore>
</configuration>